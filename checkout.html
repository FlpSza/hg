<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <style>
      /* Reset de margens e preenchimentos */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Estilos para o cabeçalho principal */
      header {
        background-color: #ff0084;
        height: 80px; /* Altura do cabeçalho */
        display: flex;
        align-items: center; /* Alinha a logo verticalmente */
        justify-content: center; /* Alinha a logo horizontalmente */
      }

      /* Estilos para a logo */
      .logo img {
        height: 50px; /* Ajusta o tamanho da logo */
      }

      /* Estilos para o corpo da página */
      body {
        height: 100vh; /* Garantir que o corpo ocupe a tela toda */
        display: flex;
        flex-direction: column;
      }

      /* Estilos para o conteúdo de checkout */
      .checkout-content {
        flex: 1; /* O conteúdo do checkout ocupará o restante da altura da tela */
        background-color: #fff; /* Cor de fundo do card */
        margin-top: -10px; /* Para o card pegar parte do cabeçalho */
        margin-left: 15%;
        margin-right: 15%;
        padding: 20px; /* Espaçamento interno do card */
        border-radius: 10px; /* Bordas arredondadas no card */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Sombras para o card */
        margin-bottom: 20px; /* Espaçamento inferior */
      }

      /* Estilos para o cabeçalho do checkout (seção interna) */
      .checkout-header {
        background-color: #f2f2f2; /* Cor de fundo cinza */
        padding: 1%; /* Espaçamento interno do header */
        border-radius: 10px; /* Bordas arredondadas no header */
        margin-top: -2.2%;
        margin-left: -2.2%;
        margin-right: -2.2%;
        margin-bottom: 20px; /* Espaçamento inferior */
      }

      /* Estilos para o título do checkout */
      .checkout-header h2 {
        color: #333; /* Cor do texto do título */
        font-size: 24px; /* Tamanho da fonte do título */
      }

      /* Estilos para o checklist */
      .checkout-stages {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .stage {
        text-align: center;
        flex: 1;
      }

      .stage i {
        font-size: 15px;
        color: #ff0084;
      }

      .stage p {
        font-size: 14px;
        margin-top: 10px;
      }

      .completed i {
        color: green;
      }

      .pending i {
        color: gray;
      }

      .subtitulo {
        text-align: center;
      }

      .subtitulo hr {
        /* margin-left: 10%;
            margin-right: 10%; */
        margin-top: 3%;
        margin-bottom: 2%;
      }

      .form-group {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .form-group label {
        flex: 0 0 45%;
        display: flex;
        flex-direction: column;
        font-size: 14px;
      }

      .form-group input {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 14px;
      }

      .form-group.full-width label {
        flex: 0 0 100%;
      }

      .button-container {
        text-align: center;
        margin-top: 20px;
      }

      .button-container button {
        background-color: #ff0084;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
      }

      .button-container button:hover {
        background-color: #e60074;
      }
    </style>
    <!-- Incluindo o FontAwesome para ícones -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <div class="logo">
        <!-- Substitua 'logo-higo.png' pelo caminho real da sua logo -->
        <img src="img/logotipo_2.png" alt="Logo Higo" />
      </div>
    </header>

    <!-- Conteúdo do Checkout -->
    <div class="checkout-content">
      <!-- Cabeçalho do checkout com fundo cinza -->
      <div class="checkout-header">
        <!-- Checklist dos estágios -->
        <div class="checkout-stages">
          <!-- Estágio 1: Login -->
          <div class="stage completed">
            <i class="fas fa-check-circle"></i>
            <p>Login</p>
          </div>

          <!-- Estágio 2: Informações do Usuário -->
          <div class="stage pending">
            <i class="fas fa-user"></i>
            <p>Informações do Usuário</p>
          </div>

          <!-- Estágio 3: Confirmação -->
          <div class="stage pending">
            <i class="fas fa-check"></i>
            <p>Confirmação</p>
          </div>
        </div>
      </div>

      <!-- Adicione o conteúdo do checkout aqui -->
      <div class="subtitulo">
        <h4>Informações do Titular.</h4>
        <hr />
      </div>

      <div class="sub-itens">
        <div class="form-group">
          <label for="nome">
            Nome
            <input type="text" id="nome" name="nome" />
          </label>
          <label for="sobrenome">
            Sobrenome
            <input type="text" id="sobrenome" name="sobrenome" />
          </label>
        </div>
        <div class="form-group">
          <label for="nascimento">
            Data de Nascimento
            <input type="date" id="nascimento" name="nascimento" />
          </label>
          <label for="nacionalidade">
            Nacionalidade
            <input type="text" id="nacionalidade" name="nacionalidade" />
          </label>
        </div>
        <div class="form-group">
          <label for="ddd">
            DDD
            <input type="text" id="ddd" name="ddd" />
          </label>
          <label for="telefone">
            Telefone
            <input type="text" id="telefone" name="telefone" />
          </label>
        </div>
        <div class="form-group">
          <label for="cpf">
            CPF/CNPJ
            <input type="text" id="cpf" name="cpf" />
          </label>
          <label for="cep">
            CEP
            <input type="text" id="cep" name="cep" />
          </label>
          <div class="form-group">
            <label for="numero-casa">
              Número da Casa
              <input type="text" id="numero-casa" name="numero-casa" />
            </label>
          </div>
        </div>
        <hr />
        <div class="subtitulo">
          <h4>Confirme seu email.</h4>
          <br />
        </div>
        <div class="form-group">
          <label for="email" class="full-width">
            Email
            <input type="email" id="email" name="email" />
          </label>
          <label for="confirmar-email" class="full-width">
            Confirmação de Email
            <input type="email" id="confirmar-email" name="confirmar-email" />
          </label>
        </div>
      </div>

      <hr />

      <div class="button-container">
        <a>
          <button type="button">Avançar</button>
        </a>
      </div>
    </div>
    <script>
      // Função que é chamada quando o usuário clica em "Avançar"
      document.querySelector("button").addEventListener("click", function () {
        // Captura os dados do formulário
        const nome = document.getElementById("nome").value;
        const sobrenome = document.getElementById("sobrenome").value;
        const nascimento = document.getElementById("nascimento").value;
        const nacionalidade = document.getElementById("nacionalidade").value;
        const ddd = document.getElementById("ddd").value;
        const telefone = document.getElementById("telefone").value;
        const cpf = document.getElementById("cpf").value;
        const cep = document.getElementById("cep").value;
        const email = document.getElementById("email").value;
        const numeroCasa = document.getElementById("numero-casa").value;

        // Criação do objeto com os dados do formulário
        const clienteData = {
          nome,
          sobrenome,
          nascimento,
          nacionalidade,
          ddd,
          telefone,
          cpf,
          cep,
          numeroCasa,
          email,
        };

        // Enviar os dados para o backend
        fetch("https://higopromopage.onrender.com/criar-cliente", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(clienteData),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log("Resposta do servidor:", data);
            if (data.success) {
              // Redirecionar para a próxima página
              window.location.href = "./payment.html";
            } else {
              console.error("Erro retornado pelo backend:", {
                status: "Falha",
                mensagemErro: data.error,
                respostaCompleta: data,
              });
              alert("Erro ao criar o cliente, verifique as informações adicionadas.");
              console.log("Resposta do servidor:", data);
            }
          })
          .catch((error) => {
            console.error("Erro ao enviar os dados:", error);
          });
      });
    </script>
  </body>
</html>
